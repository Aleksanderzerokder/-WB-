<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>WB –î–∞—à–±–æ—Ä–¥ ‚Äî –Ø–Ω–≤–∞—Ä—å 2026</title>
<link href="https://fonts.googleapis.com/css2?family=Unbounded:wght@400;600;800&family=Inter:wght@300;400;500;600&display=swap" rel="stylesheet">
<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/4.4.1/chart.umd.min.js"></script>
<style>
  :root {
    --bg: #0a0d14;
    --surface: #111520;
    --surface2: #161b2a;
    --border: rgba(255,255,255,0.07);
    --accent: #6C63FF;
    --accent2: #00E5A0;
    --accent3: #FF6B6B;
    --accent4: #FFB547;
    --text: #E8EAF0;
    --muted: #6B7280;
    --green: #00E5A0;
    --red: #FF6B6B;
  }

  * { margin: 0; padding: 0; box-sizing: border-box; }

  body {
    background: var(--bg);
    color: var(--text);
    font-family: 'Inter', sans-serif;
    min-height: 100vh;
    overflow-x: hidden;
  }

  /* Noise texture overlay */
  body::before {
    content: '';
    position: fixed;
    inset: 0;
    background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noise'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noise)' opacity='0.035'/%3E%3C/svg%3E");
    pointer-events: none;
    z-index: 0;
  }

  /* Gradient orbs */
  .orb {
    position: fixed;
    border-radius: 50%;
    filter: blur(120px);
    opacity: 0.12;
    pointer-events: none;
    z-index: 0;
  }
  .orb1 { width: 600px; height: 600px; background: var(--accent); top: -200px; left: -100px; }
  .orb2 { width: 400px; height: 400px; background: var(--accent2); bottom: 100px; right: -100px; }
  .orb3 { width: 300px; height: 300px; background: var(--accent4); top: 40%; left: 50%; }

  .wrapper {
    position: relative;
    z-index: 1;
    max-width: 1400px;
    margin: 0 auto;
    padding: 40px 28px 60px;
  }

  /* Header */
  .header {
    display: flex;
    align-items: flex-start;
    justify-content: space-between;
    margin-bottom: 48px;
    flex-wrap: wrap;
    gap: 16px;
  }

  .header-left {}

  .logo-tag {
    display: inline-flex;
    align-items: center;
    gap: 8px;
    background: rgba(108,99,255,0.15);
    border: 1px solid rgba(108,99,255,0.3);
    border-radius: 100px;
    padding: 5px 14px 5px 8px;
    font-size: 11px;
    font-weight: 600;
    color: var(--accent);
    text-transform: uppercase;
    letter-spacing: 0.08em;
    margin-bottom: 14px;
  }

  .logo-tag::before {
    content: '';
    width: 6px; height: 6px;
    border-radius: 50%;
    background: var(--accent);
    box-shadow: 0 0 8px var(--accent);
    animation: pulse 2s infinite;
  }

  @keyframes pulse {
    0%, 100% { opacity: 1; }
    50% { opacity: 0.3; }
  }

  h1 {
    font-family: 'Unbounded', sans-serif;
    font-size: clamp(22px, 3.5vw, 38px);
    font-weight: 800;
    line-height: 1.15;
    letter-spacing: -0.02em;
  }

  h1 span { color: var(--accent); }

  .subtitle {
    margin-top: 8px;
    color: var(--muted);
    font-size: 14px;
    font-weight: 400;
  }

  .header-right {
    text-align: right;
  }

  .period-badge {
    background: var(--surface);
    border: 1px solid var(--border);
    border-radius: 12px;
    padding: 12px 20px;
    font-size: 13px;
    color: var(--muted);
  }

  .period-badge strong {
    display: block;
    color: var(--text);
    font-size: 16px;
    font-family: 'Unbounded', sans-serif;
    font-weight: 600;
  }

  /* KPI Cards */
  .kpi-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(190px, 1fr));
    gap: 16px;
    margin-bottom: 28px;
  }

  .kpi-card {
    background: var(--surface);
    border: 1px solid var(--border);
    border-radius: 18px;
    padding: 22px 22px 18px;
    position: relative;
    overflow: hidden;
    transition: transform 0.2s, border-color 0.2s;
    cursor: default;
  }

  .kpi-card:hover {
    transform: translateY(-3px);
    border-color: rgba(255,255,255,0.14);
  }

  .kpi-card::after {
    content: '';
    position: absolute;
    top: 0; left: 0; right: 0;
    height: 2px;
    border-radius: 18px 18px 0 0;
  }

  .kpi-card.blue::after { background: linear-gradient(90deg, var(--accent), transparent); }
  .kpi-card.green::after { background: linear-gradient(90deg, var(--accent2), transparent); }
  .kpi-card.orange::after { background: linear-gradient(90deg, var(--accent4), transparent); }
  .kpi-card.red::after { background: linear-gradient(90deg, var(--accent3), transparent); }
  .kpi-card.purple::after { background: linear-gradient(90deg, #C084FC, transparent); }
  .kpi-card.teal::after { background: linear-gradient(90deg, #22D3EE, transparent); }

  .kpi-label {
    font-size: 11px;
    color: var(--muted);
    text-transform: uppercase;
    letter-spacing: 0.07em;
    font-weight: 600;
    margin-bottom: 10px;
  }

  .kpi-value {
    font-family: 'Unbounded', sans-serif;
    font-size: clamp(18px, 2.2vw, 26px);
    font-weight: 700;
    line-height: 1;
    letter-spacing: -0.02em;
  }

  .kpi-card.green .kpi-value { color: var(--accent2); }
  .kpi-card.blue .kpi-value { color: #818CF8; }
  .kpi-card.orange .kpi-value { color: var(--accent4); }
  .kpi-card.red .kpi-value { color: var(--accent3); }
  .kpi-card.purple .kpi-value { color: #C084FC; }
  .kpi-card.teal .kpi-value { color: #22D3EE; }

  .kpi-sub {
    margin-top: 8px;
    font-size: 12px;
    color: var(--muted);
  }

  .kpi-icon {
    position: absolute;
    top: 18px; right: 18px;
    font-size: 22px;
    opacity: 0.25;
  }

  /* Grid layouts */
  .grid-2 {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 20px;
    margin-bottom: 20px;
  }

  .grid-3 {
    display: grid;
    grid-template-columns: 2fr 1fr;
    gap: 20px;
    margin-bottom: 20px;
  }

  @media (max-width: 900px) {
    .grid-2, .grid-3 { grid-template-columns: 1fr; }
  }

  /* Cards */
  .card {
    background: var(--surface);
    border: 1px solid var(--border);
    border-radius: 18px;
    padding: 24px;
    position: relative;
    overflow: hidden;
  }

  .card-title {
    font-family: 'Unbounded', sans-serif;
    font-size: 13px;
    font-weight: 600;
    color: var(--text);
    margin-bottom: 20px;
    letter-spacing: -0.01em;
    display: flex;
    align-items: center;
    gap: 8px;
  }

  .card-title .dot {
    width: 8px; height: 8px;
    border-radius: 50%;
    background: var(--accent);
    box-shadow: 0 0 8px var(--accent);
    flex-shrink: 0;
  }

  .card-title .dot.green { background: var(--accent2); box-shadow: 0 0 8px var(--accent2); }
  .card-title .dot.orange { background: var(--accent4); box-shadow: 0 0 8px var(--accent4); }
  .card-title .dot.red { background: var(--accent3); box-shadow: 0 0 8px var(--accent3); }

  /* Chart containers */
  .chart-wrap {
    position: relative;
    height: 280px;
  }

  .chart-wrap.tall { height: 340px; }
  .chart-wrap.sm { height: 220px; }

  /* Category bars */
  .cat-list { display: flex; flex-direction: column; gap: 10px; }

  .cat-item {
    display: grid;
    grid-template-columns: 1fr auto;
    gap: 8px;
    align-items: center;
  }

  .cat-name {
    font-size: 12px;
    color: var(--text);
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
  }

  .cat-bar-wrap {
    height: 5px;
    background: rgba(255,255,255,0.06);
    border-radius: 10px;
    overflow: hidden;
    margin-top: 3px;
  }

  .cat-bar {
    height: 100%;
    border-radius: 10px;
    transition: width 0.8s cubic-bezier(0.34, 1.56, 0.64, 1);
  }

  .cat-val {
    font-size: 12px;
    font-weight: 600;
    color: var(--muted);
    text-align: right;
    min-width: 70px;
  }

  .cat-margin {
    font-size: 11px;
    padding: 2px 7px;
    border-radius: 100px;
    font-weight: 600;
  }

  .cat-margin.pos { background: rgba(0,229,160,0.1); color: var(--accent2); }
  .cat-margin.neg { background: rgba(255,107,107,0.1); color: var(--accent3); }

  /* Top articles table */
  .top-table { width: 100%; border-collapse: collapse; }

  .top-table th {
    font-size: 10px;
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 0.07em;
    color: var(--muted);
    text-align: left;
    padding: 0 0 12px;
    border-bottom: 1px solid var(--border);
  }

  .top-table th:not(:first-child) { text-align: right; }

  .top-table td {
    padding: 10px 0;
    font-size: 12px;
    border-bottom: 1px solid rgba(255,255,255,0.04);
    vertical-align: middle;
  }

  .top-table td:not(:first-child) { text-align: right; }

  .art-name {
    max-width: 200px;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    font-weight: 500;
  }

  .art-cat {
    font-size: 10px;
    color: var(--muted);
    margin-top: 2px;
  }

  .margin-pill {
    display: inline-block;
    padding: 2px 8px;
    border-radius: 100px;
    font-size: 11px;
    font-weight: 600;
  }
  .margin-pill.pos { background: rgba(0,229,160,0.12); color: var(--accent2); }
  .margin-pill.neg { background: rgba(255,107,107,0.12); color: var(--accent3); }

  .rank {
    width: 24px; height: 24px;
    border-radius: 8px;
    background: rgba(255,255,255,0.05);
    display: inline-flex;
    align-items: center;
    justify-content: center;
    font-size: 11px;
    font-weight: 700;
    color: var(--muted);
    margin-right: 10px;
    flex-shrink: 0;
  }
  .rank.gold { background: rgba(255,181,71,0.15); color: var(--accent4); }
  .rank.silver { background: rgba(148,163,184,0.12); color: #94A3B8; }
  .rank.bronze { background: rgba(205,127,50,0.12); color: #CD7F32; }

  /* Expenses breakdown */
  .expense-grid {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 12px;
  }

  .expense-item {
    background: var(--surface2);
    border-radius: 12px;
    padding: 16px;
    border: 1px solid var(--border);
  }

  .expense-item-label {
    font-size: 11px;
    color: var(--muted);
    text-transform: uppercase;
    letter-spacing: 0.06em;
    margin-bottom: 6px;
  }

  .expense-item-val {
    font-family: 'Unbounded', sans-serif;
    font-size: 16px;
    font-weight: 700;
    color: var(--accent3);
  }

  .expense-item-pct {
    font-size: 11px;
    color: var(--muted);
    margin-top: 3px;
  }

  /* Waterfall / profit bridge */
  .bridge-wrap { display: flex; flex-direction: column; gap: 8px; }

  .bridge-item {
    display: flex;
    align-items: center;
    gap: 12px;
    font-size: 12px;
  }

  .bridge-label { min-width: 160px; color: var(--muted); }

  .bridge-bar-track {
    flex: 1;
    height: 8px;
    background: rgba(255,255,255,0.05);
    border-radius: 8px;
    overflow: hidden;
    position: relative;
  }

  .bridge-bar {
    height: 100%;
    border-radius: 8px;
    position: absolute;
    left: 0;
    transition: width 1s cubic-bezier(0.34, 1.56, 0.64, 1);
  }

  .bridge-val {
    min-width: 90px;
    text-align: right;
    font-weight: 600;
    color: var(--text);
  }

  /* Alert cards */
  .alert-card {
    background: rgba(255,107,107,0.06);
    border: 1px solid rgba(255,107,107,0.2);
    border-radius: 12px;
    padding: 14px 16px;
    display: flex;
    gap: 12px;
    align-items: flex-start;
    margin-bottom: 10px;
  }

  .alert-icon { font-size: 18px; flex-shrink: 0; }

  .alert-name { font-size: 12px; font-weight: 600; margin-bottom: 3px; }
  .alert-detail { font-size: 11px; color: var(--muted); }

  /* Footer */
  .footer {
    text-align: center;
    margin-top: 40px;
    font-size: 12px;
    color: var(--muted);
    padding: 20px;
    border-top: 1px solid var(--border);
  }

  /* Animations */
  @keyframes fadeUp {
    from { opacity: 0; transform: translateY(24px); }
    to { opacity: 1; transform: translateY(0); }
  }

  .kpi-card { animation: fadeUp 0.5s ease both; }
  .kpi-card:nth-child(1) { animation-delay: 0.05s; }
  .kpi-card:nth-child(2) { animation-delay: 0.10s; }
  .kpi-card:nth-child(3) { animation-delay: 0.15s; }
  .kpi-card:nth-child(4) { animation-delay: 0.20s; }
  .kpi-card:nth-child(5) { animation-delay: 0.25s; }
  .kpi-card:nth-child(6) { animation-delay: 0.30s; }

  .card { animation: fadeUp 0.6s ease both; animation-delay: 0.35s; }

  .section-label {
    font-size: 10px;
    text-transform: uppercase;
    letter-spacing: 0.12em;
    color: var(--muted);
    font-weight: 700;
    margin-bottom: 14px;
    margin-top: 32px;
    padding-left: 4px;
  }
</style>
</head>
<body>
<div class="orb orb1"></div>
<div class="orb orb2"></div>
<div class="orb orb3"></div>

<div class="wrapper">

  <!-- Header -->
  <div class="header">
    <div class="header-left">
      <div class="logo-tag">WB –ê–Ω–∞–ª–∏—Ç–∏–∫–∞ ¬∑ ZA–ø–∞–∫—É–π</div>
      <h1>–§–∏–Ω–∞–Ω—Å–æ–≤—ã–π<br><span>–¥–∞—à–±–æ—Ä–¥</span></h1>
      <p class="subtitle">–û—Ç—á—ë—Ç –æ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ Wildberries ¬∑ 149 –∞—Ä—Ç–∏–∫—É–ª–æ–≤ ¬∑ 16 –∫–∞—Ç–µ–≥–æ—Ä–∏–π</p>
    </div>
    <div class="header-right">
      <div class="period-badge">
        <strong>–Ø–Ω–≤–∞—Ä—å 2026</strong>
        01.01.2026 ‚Äî 31.01.2026
      </div>
    </div>
  </div>

  <!-- KPI Cards -->
  <div class="section-label">–ö–ª—é—á–µ–≤—ã–µ –ø–æ–∫–∞–∑–∞—Ç–µ–ª–∏</div>
  <div class="kpi-grid">
    <div class="kpi-card blue">
      <div class="kpi-icon">üí∞</div>
      <div class="kpi-label">–í—ã—Ä—É—á–∫–∞ –í–ë</div>
      <div class="kpi-value">315 655 ‚ÇΩ</div>
      <div class="kpi-sub">–î–æ –≤—Å–µ—Ö —É–¥–µ—Ä–∂–∞–Ω–∏–π</div>
    </div>
    <div class="kpi-card teal">
      <div class="kpi-icon">üì§</div>
      <div class="kpi-label">–ö –ø–µ—Ä–µ—á–∏—Å–ª–µ–Ω–∏—é</div>
      <div class="kpi-value">296 972 ‚ÇΩ</div>
      <div class="kpi-sub">–§–∞–∫—Ç–∏—á–µ—Å–∫–∏ –æ—Ç –í–ë</div>
    </div>
    <div class="kpi-card green">
      <div class="kpi-icon">üìà</div>
      <div class="kpi-label">–í–∞–ª–æ–≤–∞—è –ø—Ä–∏–±—ã–ª—å</div>
      <div class="kpi-value">193 787 ‚ÇΩ</div>
      <div class="kpi-sub">–ü–æ—Å–ª–µ —Å–µ–±–µ—Å—Ç–æ–∏–º–æ—Å—Ç–∏</div>
    </div>
    <div class="kpi-card orange">
      <div class="kpi-icon">üè∑Ô∏è</div>
      <div class="kpi-label">–°—Ä–µ–¥–Ω—è—è –º–∞—Ä–∂–∞</div>
      <div class="kpi-value">61.4%</div>
      <div class="kpi-sub">–ü–æ –≤—Å–µ–º –∞—Ä—Ç–∏–∫—É–ª–∞–º</div>
    </div>
    <div class="kpi-card purple">
      <div class="kpi-icon">üì¶</div>
      <div class="kpi-label">–ü—Ä–æ–¥–∞–Ω–æ, —à—Ç</div>
      <div class="kpi-value">886</div>
      <div class="kpi-sub">9 –≤–æ–∑–≤—Ä–∞—Ç–æ–≤ (1%)</div>
    </div>
    <div class="kpi-card red">
      <div class="kpi-icon">üöõ</div>
      <div class="kpi-label">–ó–∞—Ç—Ä–∞—Ç—ã –í–ë</div>
      <div class="kpi-value">141 850 ‚ÇΩ</div>
      <div class="kpi-sub">–ö–æ–º–∏—Å—Å–∏—è + –ª–æ–≥–∏—Å—Ç–∏–∫–∞</div>
    </div>
  </div>

  <!-- Row 1: Daily chart + Expenses -->
  <div class="section-label">–î–∏–Ω–∞–º–∏–∫–∞ –∏ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –∑–∞—Ç—Ä–∞—Ç</div>
  <div class="grid-3">
    <div class="card">
      <div class="card-title"><span class="dot"></span> –î–∏–Ω–∞–º–∏–∫–∞ –ø—Ä–æ–¥–∞–∂ ‚Äî —è–Ω–≤–∞—Ä—å 2026</div>
      <div class="chart-wrap">
        <canvas id="dailyChart"></canvas>
      </div>
    </div>

    <div class="card">
      <div class="card-title"><span class="dot red"></span> –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –∑–∞—Ç—Ä–∞—Ç –í–ë</div>
      <div class="chart-wrap sm" style="height:180px; margin-bottom:16px">
        <canvas id="expensePie"></canvas>
      </div>
      <div class="expense-grid">
        <div class="expense-item">
          <div class="expense-item-label">–ö–æ–º–∏—Å—Å–∏—è –í–í</div>
          <div class="expense-item-val">19 025 ‚ÇΩ</div>
          <div class="expense-item-pct">13.4% –æ—Ç –∑–∞—Ç—Ä–∞—Ç</div>
        </div>
        <div class="expense-item">
          <div class="expense-item-label">–õ–æ–≥–∏—Å—Ç–∏–∫–∞</div>
          <div class="expense-item-val">106 612 ‚ÇΩ</div>
          <div class="expense-item-pct">75.2% –æ—Ç –∑–∞—Ç—Ä–∞—Ç</div>
        </div>
        <div class="expense-item">
          <div class="expense-item-label">–°–∫–ª–∞–¥. –æ–ø–µ—Ä–∞—Ü–∏–∏</div>
          <div class="expense-item-val">16 213 ‚ÇΩ</div>
          <div class="expense-item-pct">11.4% –æ—Ç –∑–∞—Ç—Ä–∞—Ç</div>
        </div>
        <div class="expense-item">
          <div class="expense-item-label">–°–µ–±–µ—Å—Ç–æ–∏–º–æ—Å—Ç—å</div>
          <div class="expense-item-val" style="color: var(--accent4)">103 185 ‚ÇΩ</div>
          <div class="expense-item-pct">–ó–∞–∫—É–ø–∫–∞ —Ç–æ–≤–∞—Ä–∞</div>
        </div>
      </div>
    </div>
  </div>

  <!-- Row 2: Category revenue + profit bridge -->
  <div class="section-label">–ö–∞—Ç–µ–≥–æ—Ä–∏–∏ –∏ –º–∞—Ä–∂–∏–Ω–∞–ª—å–Ω–æ—Å—Ç—å</div>
  <div class="grid-2">
    <div class="card">
      <div class="card-title"><span class="dot orange"></span> –í—ã—Ä—É—á–∫–∞ –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º</div>
      <div class="chart-wrap tall">
        <canvas id="catChart"></canvas>
      </div>
    </div>

    <div class="card">
      <div class="card-title"><span class="dot green"></span> –ú–∞—Ä–∂–∏–Ω–∞–ª—å–Ω–æ—Å—Ç—å –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º</div>
      <div class="cat-list" id="catMarginList"></div>
    </div>
  </div>

  <!-- Row 3: Top articles + Unprofitable -->
  <div class="section-label">–¢–æ–ø –∞—Ä—Ç–∏–∫—É–ª–æ–≤ –∏ –∑–æ–Ω—ã —Ä–∏—Å–∫–∞</div>
  <div class="grid-2">
    <div class="card">
      <div class="card-title"><span class="dot green"></span> –¢–æ–ø-10 –ø–æ –≤–∞–ª–æ–≤–æ–π –ø—Ä–∏–±—ã–ª–∏</div>
      <table class="top-table">
        <thead>
          <tr>
            <th>–¢–æ–≤–∞—Ä</th>
            <th>–®—Ç</th>
            <th>–ü—Ä–∏–±—ã–ª—å</th>
            <th>–ú–∞—Ä–∂–∞</th>
          </tr>
        </thead>
        <tbody id="topTable"></tbody>
      </table>
    </div>

    <div class="card">
      <div class="card-title"><span class="dot red"></span> –£–±—ã—Ç–æ—á–Ω—ã–µ –∞—Ä—Ç–∏–∫—É–ª—ã</div>
      <div id="unprofitableList"></div>
      <div style="margin-top:20px">
        <div class="card-title" style="margin-bottom:14px"><span class="dot orange"></span> –ü—Ä–∏–±—ã–ª—å: –∫–∞–∫ —Ñ–æ—Ä–º–∏—Ä—É–µ—Ç—Å—è</div>
        <div class="bridge-wrap" id="bridgeWrap"></div>
      </div>
    </div>
  </div>

  <div class="footer">
    –î–∞–Ω–Ω—ã–µ: –û—Ç—á—ë—Ç –í–ë –æ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ ¬∑ –Ø–Ω–≤–∞—Ä—å 2026 ¬∑ –ë—Ä–µ–Ω–¥ ZA–ø–∞–∫—É–π ¬∑ –°—Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–æ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
  </div>
</div>

<script>
// ===== DATA =====
const dailyData = {
  labels: ['01.01','02.01','03.01','04.01','05.01','06.01','07.01','08.01','09.01','10.01','11.01','12.01','13.01','14.01','15.01','16.01','17.01','18.01','19.01','20.01','21.01','22.01','23.01','24.01','25.01','26.01','27.01','28.01','29.01','30.01','31.01'],
  revenue: [0,6568,7601,7304,10271,7247,8473,8416,9018,6876,9384,9090,8680,7832,9614,7670,8770,8218,8380,8543,9032,9815,8390,9120,8965,10832,9215,9740,8630,10450,9875],
  units: [0,21,18,21,30,19,27,24,30,21,29,28,27,24,30,23,27,25,26,26,28,30,26,28,27,33,28,30,26,32,30]
};

const categories = [
  { name: '–ü–æ–¥–∞—Ä–æ—á–Ω—ã–µ –∫–æ—Ä–æ–±–∫–∏', revenue: 123716, profit: 88440, margin: 71.5 },
  { name: '–ê–∫—Å–µ—Å—Å—É–∞—Ä—ã –¥–ª—è –±–∏–∂—É—Ç–µ—Ä–∏–∏', revenue: 57288, profit: 33441, margin: 58.4 },
  { name: '–ü–æ–¥–∞—Ä–æ—á–Ω—ã–µ –ø–∞–∫–µ—Ç—ã', revenue: 33947, profit: 16997, margin: 50.1 },
  { name: '–ü–∞–∫–µ—Ç—ã —É–ø–∞–∫–æ–≤–æ—á–Ω—ã–µ', revenue: 23555, profit: 12359, margin: 52.5 },
  { name: '–ö–æ—Ä–æ–±–∫–∏ –¥–ª—è –¥–µ—Å–µ—Ä—Ç–æ–≤', revenue: 23001, profit: 14113, margin: 61.4 },
  { name: '–ë—Ä–µ–ª–æ–∫–∏', revenue: 20331, profit: 10539, margin: 51.8 },
  { name: '–ù–∞–ø–æ–ª–Ω–∏—Ç–µ–ª–∏', revenue: 8133, profit: 6549, margin: 80.5 },
  { name: '–ù–∞–∫–ª–µ–π–∫–∏', revenue: 6947, profit: 5580, margin: 80.3 },
  { name: '–ö–æ—Å–º–µ—Ç–∏—á–∫–∏', revenue: 7621, profit: 1812, margin: 23.8 },
  { name: '–ö–∞—Ä—Ç–∏–Ω—ã –ø–æ –Ω–æ–º–µ—Ä–∞–º', revenue: 3584, profit: -728, margin: -20.3 },
];

const top10 = [
  { name: '–ö–æ—Ä–æ–±–∫–∞-–∫—É–± —Å –±–µ–ª–æ–π –æ–∫–∞–Ω—Ç–æ–≤–∫–æ–π 21x21x21', cat: '–ü–æ–¥–∞—Ä–æ—á–Ω—ã–µ –∫–æ—Ä–æ–±–∫–∏', qty: 67, profit: 25775, margin: 77.5 },
  { name: '–ù–∞–ø–æ–ª–Ω–∏—Ç–µ–ª—å –ø–µ–Ω–æ–ø–ª–∞—Å—Ç–æ–≤—ã–π —à–∞—Ä–∏–∫–∏', cat: '–ù–∞–ø–æ–ª–Ω–∏—Ç–µ–ª–∏', qty: 29, profit: 14030, margin: 71.5 },
  { name: '–ö–æ—Ä–æ–±–∫–∞ —à–æ–∫–æ–ª–∞–¥ 21x21x21 —Å–º', cat: '–ü–æ–¥–∞—Ä–æ—á–Ω—ã–µ –∫–æ—Ä–æ–±–∫–∏', qty: 37, profit: 13993, margin: 77.8 },
  { name: '–ö–∞—Ä–∞–±–∏–Ω-–∫–æ–ª—å—Ü–æ –∑–æ–ª–æ—Ç–æ 5 —à—Ç—É–∫', cat: '–ê–∫—Å–µ—Å—Å—É–∞—Ä—ã', qty: 33, profit: 7056, margin: 59.6 },
  { name: '–ö–æ—Ä–æ–±–∫–∞-–∫—É–± –∑–æ–ª–æ—Ç–∞—è –æ–∫–∞–Ω—Ç–æ–≤–∫–∞ 21x21', cat: '–ü–æ–¥–∞—Ä–æ—á–Ω—ã–µ –∫–æ—Ä–æ–±–∫–∏', qty: 19, profit: 6843, margin: 78.9 },
  { name: '–ö–æ—Ä–æ–±–∫–∞ –∫–æ—Ä–∏—á–Ω–µ–≤–∞—è –æ–∫–∞–Ω—Ç–æ–≤–∫–∞ 20x20', cat: '–ü–æ–¥–∞—Ä–æ—á–Ω—ã–µ –∫–æ—Ä–æ–±–∫–∏', qty: 22, profit: 5168, margin: 68.5 },
  { name: '–ö–∞—Ä–∞–±–∏–Ω-–∫–æ–ª—å—Ü–æ –∑–æ–ª–æ—Ç–æ 10 —à—Ç—É–∫', cat: '–ê–∫—Å–µ—Å—Å—É–∞—Ä—ã', qty: 16, profit: 5080, margin: 62.8 },
  { name: '–ö–∞—Ä–∞–±–∏–Ω-–∫–æ–ª—å—Ü–æ —Å—Ç–∞–ª—å 10 —à—Ç—É–∫', cat: '–ê–∫—Å–µ—Å—Å—É–∞—Ä—ã', qty: 16, profit: 4997, margin: 61.2 },
  { name: '–§—É—Ä–Ω–∏—Ç—É—Ä–∞ –¥–ª—è –±—Ä–µ–ª–∫–æ–≤ 10 —à—Ç', cat: '–ê–∫—Å–µ—Å—Å—É–∞—Ä—ã', qty: 28, profit: 4607, margin: 50.7 },
  { name: '–ö–æ—Ä–æ–±–∫–∞ –∫–æ—Ä–∏—á–Ω–µ–≤–∞—è –æ–∫–∞–Ω—Ç–æ–≤–∫–∞ 3 —à—Ç', cat: '–ü–æ–¥–∞—Ä–æ—á–Ω—ã–µ –∫–æ—Ä–æ–±–∫–∏', qty: 17, profit: 3859, margin: 57.7 },
];

const unprofitable = [
  { name: '–ö–∞—Ä—Ç–∏–Ω—ã –ø–æ –Ω–æ–º–µ—Ä–∞–º', cat: '–ö–∞—Ä—Ç–∏–Ω—ã –ø–æ –Ω–æ–º–µ—Ä–∞–º', qty: 10, profit: -728, margin: -20.3 },
  { name: '–ü–µ–Ω–∞–ª—ã', cat: '–ü–µ–Ω–∞–ª—ã', qty: 4, profit: -245, margin: -16.1 },
  { name: '–§–ª–∞–∫–æ–Ω—ã –∫–æ—Å–º–µ—Ç–∏—á–µ—Å–∫–∏–µ', cat: '–§–ª–∞–∫–æ–Ω—ã', qty: 1, profit: -89, margin: -15.7 },
];

// ===== CHART DEFAULTS =====
Chart.defaults.color = '#6B7280';
Chart.defaults.font.family = 'Inter';

// ===== DAILY CHART =====
const dailyCtx = document.getElementById('dailyChart').getContext('2d');
const gradBlue = dailyCtx.createLinearGradient(0, 0, 0, 280);
gradBlue.addColorStop(0, 'rgba(108,99,255,0.3)');
gradBlue.addColorStop(1, 'rgba(108,99,255,0)');

new Chart(dailyCtx, {
  type: 'line',
  data: {
    labels: dailyData.labels,
    datasets: [{
      label: '–í—ã—Ä—É—á–∫–∞, ‚ÇΩ',
      data: dailyData.revenue,
      borderColor: '#6C63FF',
      backgroundColor: gradBlue,
      borderWidth: 2,
      fill: true,
      tension: 0.4,
      pointRadius: 0,
      pointHoverRadius: 5,
      pointHoverBackgroundColor: '#6C63FF',
      yAxisID: 'y',
    }, {
      label: '–ü—Ä–æ–¥–∞–∂, —à—Ç',
      data: dailyData.units,
      borderColor: '#00E5A0',
      backgroundColor: 'transparent',
      borderWidth: 1.5,
      borderDash: [4, 3],
      fill: false,
      tension: 0.4,
      pointRadius: 0,
      pointHoverRadius: 4,
      pointHoverBackgroundColor: '#00E5A0',
      yAxisID: 'y1',
    }]
  },
  options: {
    responsive: true,
    maintainAspectRatio: false,
    interaction: { mode: 'index', intersect: false },
    plugins: {
      legend: { position: 'top', align: 'end', labels: { boxWidth: 12, font: { size: 11 } } },
      tooltip: {
        backgroundColor: '#161b2a',
        borderColor: 'rgba(255,255,255,0.1)',
        borderWidth: 1,
        callbacks: {
          label: ctx => ctx.datasetIndex === 0 ? ` ${ctx.raw.toLocaleString('ru')} ‚ÇΩ` : ` ${ctx.raw} —à—Ç`
        }
      }
    },
    scales: {
      x: { grid: { color: 'rgba(255,255,255,0.04)' }, ticks: { font: { size: 10 }, maxTicksLimit: 10 } },
      y: {
        grid: { color: 'rgba(255,255,255,0.04)' },
        ticks: { font: { size: 10 }, callback: v => v.toLocaleString('ru') + ' ‚ÇΩ' }
      },
      y1: {
        position: 'right',
        grid: { display: false },
        ticks: { font: { size: 10 }, callback: v => v + ' —à—Ç' }
      }
    }
  }
});

// ===== EXPENSE PIE =====
const pieCtx = document.getElementById('expensePie').getContext('2d');
new Chart(pieCtx, {
  type: 'doughnut',
  data: {
    labels: ['–õ–æ–≥–∏—Å—Ç–∏–∫–∞', '–ö–æ–º–∏—Å—Å–∏—è –í–í', '–°–∫–ª–∞–¥. –æ–ø–µ—Ä–∞—Ü–∏–∏'],
    datasets: [{
      data: [106612, 19025, 16213],
      backgroundColor: ['#FF6B6B', '#6C63FF', '#FFB547'],
      borderColor: '#111520',
      borderWidth: 3,
      hoverBorderWidth: 0,
    }]
  },
  options: {
    responsive: true,
    maintainAspectRatio: false,
    cutout: '70%',
    plugins: {
      legend: { position: 'right', labels: { boxWidth: 10, font: { size: 11 }, padding: 12 } },
      tooltip: {
        backgroundColor: '#161b2a',
        borderColor: 'rgba(255,255,255,0.1)',
        borderWidth: 1,
        callbacks: {
          label: ctx => ` ${ctx.raw.toLocaleString('ru')} ‚ÇΩ (${(ctx.raw/141850*100).toFixed(1)}%)`
        }
      }
    }
  }
});

// ===== CATEGORY BAR CHART =====
const catCtx = document.getElementById('catChart').getContext('2d');
const catColors = ['#6C63FF','#00E5A0','#FFB547','#FF6B6B','#22D3EE','#C084FC','#34D399','#F472B6','#A78BFA','#60A5FA'];

new Chart(catCtx, {
  type: 'bar',
  data: {
    labels: categories.map(c => c.name.length > 20 ? c.name.slice(0,20)+'‚Ä¶' : c.name),
    datasets: [{
      label: '–í—ã—Ä—É—á–∫–∞ –í–ë, ‚ÇΩ',
      data: categories.map(c => c.revenue),
      backgroundColor: catColors.map(c => c + '99'),
      borderColor: catColors,
      borderWidth: 1.5,
      borderRadius: 6,
    }, {
      label: '–ü—Ä–∏–±—ã–ª—å, ‚ÇΩ',
      data: categories.map(c => c.profit),
      backgroundColor: categories.map(c => c.profit >= 0 ? 'rgba(0,229,160,0.5)' : 'rgba(255,107,107,0.5)'),
      borderColor: categories.map(c => c.profit >= 0 ? '#00E5A0' : '#FF6B6B'),
      borderWidth: 1.5,
      borderRadius: 6,
    }]
  },
  options: {
    responsive: true,
    maintainAspectRatio: false,
    plugins: {
      legend: { position: 'top', align: 'end', labels: { boxWidth: 10, font: { size: 11 } } },
      tooltip: {
        backgroundColor: '#161b2a',
        borderColor: 'rgba(255,255,255,0.1)',
        borderWidth: 1,
        callbacks: { label: ctx => ` ${ctx.raw.toLocaleString('ru')} ‚ÇΩ` }
      }
    },
    scales: {
      x: { grid: { display: false }, ticks: { font: { size: 10 } } },
      y: {
        grid: { color: 'rgba(255,255,255,0.04)' },
        ticks: { font: { size: 10 }, callback: v => (v/1000).toFixed(0)+'k' }
      }
    }
  }
});

// ===== CATEGORY MARGIN LIST =====
const sortedCats = [...categories].sort((a, b) => b.margin - a.margin);
const maxRev = Math.max(...categories.map(c => c.revenue));
const ml = document.getElementById('catMarginList');

sortedCats.forEach(cat => {
  const isPos = cat.margin >= 0;
  const barColor = isPos
    ? `hsl(${150 + cat.margin * 0.4}, 80%, 55%)`
    : '#FF6B6B';

  ml.innerHTML += `
    <div class="cat-item">
      <div>
        <div class="cat-name">${cat.name}</div>
        <div class="cat-bar-wrap">
          <div class="cat-bar" style="width:${Math.abs(cat.margin)/100*100}%; background:${barColor}"></div>
        </div>
      </div>
      <div style="display:flex;flex-direction:column;align-items:flex-end;gap:3px">
        <span class="cat-margin ${isPos?'pos':'neg'}">${cat.margin.toFixed(1)}%</span>
        <span class="cat-val">${(cat.revenue/1000).toFixed(0)}k ‚ÇΩ</span>
      </div>
    </div>`;
});

// ===== TOP TABLE =====
const tt = document.getElementById('topTable');
top10.forEach((item, i) => {
  const rankClass = i===0?'gold':i===1?'silver':i===2?'bronze':'';
  tt.innerHTML += `
    <tr>
      <td>
        <div style="display:flex;align-items:center">
          <span class="rank ${rankClass}">${i+1}</span>
          <div>
            <div class="art-name">${item.name}</div>
            <div class="art-cat">${item.cat}</div>
          </div>
        </div>
      </td>
      <td style="color:var(--muted)">${item.qty}</td>
      <td style="font-weight:600;color:var(--accent2)">${item.profit.toLocaleString('ru')} ‚ÇΩ</td>
      <td><span class="margin-pill pos">${item.margin.toFixed(1)}%</span></td>
    </tr>`;
});

// ===== UNPROFITABLE =====
const ul = document.getElementById('unprofitableList');
unprofitable.forEach(item => {
  ul.innerHTML += `
    <div class="alert-card">
      <div class="alert-icon">‚ö†Ô∏è</div>
      <div>
        <div class="alert-name">${item.name}</div>
        <div class="alert-detail">
          –ü—Ä–æ–¥–∞–Ω–æ: ${item.qty} —à—Ç &nbsp;¬∑&nbsp;
          –£–±—ã—Ç–æ–∫: <span style="color:var(--red);font-weight:600">${Math.abs(item.profit).toLocaleString('ru')} ‚ÇΩ</span> &nbsp;¬∑&nbsp;
          –ú–∞—Ä–∂–∞: <span style="color:var(--red)">${item.margin.toFixed(1)}%</span>
        </div>
      </div>
    </div>`;
});

// ===== PROFIT BRIDGE =====
const bridgeData = [
  { label: '–í—ã—Ä—É—á–∫–∞ –í–ë', val: 315655, color: '#6C63FF', pct: 100 },
  { label: '‚Äî –ö–æ–º–∏—Å—Å–∏—è –í–í', val: -19025, color: '#FF6B6B', pct: 6.0 },
  { label: '‚Äî –õ–æ–≥–∏—Å—Ç–∏–∫–∞', val: -106612, color: '#FF6B6B', pct: 33.8 },
  { label: '‚Äî –°–∫–ª–∞–¥. –æ–ø–µ—Ä–∞—Ü–∏–∏', val: -16213, color: '#FFB547', pct: 5.1 },
  { label: '= –ö –ø–µ—Ä–µ—á–∏—Å–ª–µ–Ω–∏—é', val: 296972, color: '#22D3EE', pct: 94.1 },
  { label: '‚Äî –°–µ–±–µ—Å—Ç–æ–∏–º–æ—Å—Ç—å', val: -103185, color: '#FF6B6B', pct: 32.7 },
  { label: '= –í–∞–ª–æ–≤–∞—è –ø—Ä–∏–±—ã–ª—å', val: 193787, color: '#00E5A0', pct: 61.4 },
];

const bw = document.getElementById('bridgeWrap');
bridgeData.forEach(item => {
  bw.innerHTML += `
    <div class="bridge-item">
      <div class="bridge-label">${item.label}</div>
      <div class="bridge-bar-track">
        <div class="bridge-bar" style="width:${item.pct}%;background:${item.color};opacity:0.7"></div>
      </div>
      <div class="bridge-val" style="color:${item.val>0?'var(--text)':'var(--accent3)'}">${item.val>0?'':'-'}${Math.abs(item.val).toLocaleString('ru')} ‚ÇΩ</div>
    </div>`;
});
</script>
</body>
</html>
